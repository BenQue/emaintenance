# Android è®¾å¤‡éƒ¨ç½²æŒ‡å—

## ğŸ“± æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•åœ¨Androidè®¾å¤‡ä¸Šéƒ¨ç½²E-Maintenanceç§»åŠ¨åº”ç”¨ï¼ŒåŒ…æ‹¬å¼€å‘ç¯å¢ƒé…ç½®ã€APKæ„å»ºã€ç½‘ç»œè®¾ç½®å’ŒçœŸæœºå®‰è£…ã€‚

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚

- **Flutter**: 3.32.8+
- **Android SDK**: API Level 36 (Android 16)
- **æœ€ä½æ”¯æŒ**: Android 5.0 (API Level 21)
- **Java**: OpenJDK 11+

### ä¾èµ–æ£€æŸ¥

```bash
flutter doctor -v
```

ç¡®ä¿æ‰€æœ‰ç»„ä»¶æ˜¾ç¤º âœ“ çŠ¶æ€ã€‚

## ğŸ—ï¸ é¡¹ç›®é…ç½®

### Androidåº”ç”¨ä¿¡æ¯

- **åº”ç”¨ID**: `com.bizlink.emaintenance.mobile`
- **åº”ç”¨åç§°**: E-Maintenance
- **ç›®æ ‡SDK**: 36
- **æœ€å°SDK**: 21

### ç½‘ç»œç¯å¢ƒé…ç½®

é…ç½®æ–‡ä»¶ä½ç½®: `lib/shared/config/environment.dart`

```dart
class Environment {
  // å¼€å‘ç¯å¢ƒ - æœ¬åœ°å¼€å‘æœåŠ¡å™¨
  static const String _devBaseUrl = 'http://192.168.31.53';
  
  // ç”Ÿäº§ç¯å¢ƒ - å®é™…æœåŠ¡å™¨åœ°å€
  static const String _prodBaseUrl = 'https://api.bizlink.com';
  
  // è‡ªåŠ¨ç¯å¢ƒåˆ‡æ¢
  static bool get isDevelopment {
    bool isDebugMode = false;
    assert(isDebugMode = true);
    return isDebugMode;
  }
}
```

### å¾®æœåŠ¡åœ°å€æ˜ å°„

| ç¯å¢ƒ | ç”¨æˆ·æœåŠ¡ | å·¥å•æœåŠ¡ | èµ„äº§æœåŠ¡ |
|------|----------|----------|----------|
| **å¼€å‘** | `http://192.168.31.53:3001` | `http://192.168.31.53:3002` | `http://192.168.31.53:3003` |
| **ç”Ÿäº§** | `https://api.bizlink.com/user-service` | `https://api.bizlink.com/work-order-service` | `https://api.bizlink.com/asset-service` |

## ğŸ“¦ APKæ„å»º

### 1. æ¸…ç†é¡¹ç›®

```bash
flutter clean
flutter pub get
```

### 2. æ„å»ºDebugç‰ˆæœ¬ (å¼€å‘æµ‹è¯•)

```bash
flutter build apk --debug
```

- **è¾“å‡ºæ–‡ä»¶**: `build/app/outputs/flutter-apk/app-debug.apk`
- **å¤§å°**: ~104MB
- **ç”¨é€”**: å¼€å‘è°ƒè¯•ï¼ŒåŒ…å«è°ƒè¯•ä¿¡æ¯
- **æœåŠ¡å™¨**: ä½¿ç”¨å¼€å‘ç¯å¢ƒåœ°å€

### 3. æ„å»ºReleaseç‰ˆæœ¬ (ç”Ÿäº§éƒ¨ç½²)

```bash
flutter build apk --release
```

- **è¾“å‡ºæ–‡ä»¶**: `build/app/outputs/flutter-apk/app-release.apk`
- **å¤§å°**: ~35MB
- **ç”¨é€”**: ç”Ÿäº§éƒ¨ç½²ï¼Œæ€§èƒ½ä¼˜åŒ–
- **æœåŠ¡å™¨**: è‡ªåŠ¨ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒåœ°å€

## ğŸ”§ ç½‘ç»œé…ç½®æ›´æ–°

### ä¿®æ”¹ç”Ÿäº§æœåŠ¡å™¨åœ°å€

1. **ç¼–è¾‘é…ç½®æ–‡ä»¶**:

   ```bash
   # ç¼–è¾‘ lib/shared/config/environment.dart
   static const String _prodBaseUrl = 'https://ä½ çš„åŸŸå.com';
   ```

2. **é‡æ–°æ„å»ºAPK**:

   ```bash
   flutter build apk --release
   ```

### å¸¸è§ç”Ÿäº§åœ°å€ç¤ºä¾‹

```dart
// ç¤ºä¾‹1: å­åŸŸå
static const String _prodBaseUrl = 'https://api.company.com';

// ç¤ºä¾‹2: è·¯å¾„å‰ç¼€
static const String _prodBaseUrl = 'https://company.com/api';

// ç¤ºä¾‹3: äº‘æœåŠ¡
static const String _prodBaseUrl = 'https://prod-server.aliyun.com';
```

## ğŸ“² çœŸæœºå®‰è£…æŒ‡å—

### æ–¹æ³•1: ç›´æ¥ä¼ è¾“å®‰è£… (æ¨è)

#### æ­¥éª¤1: è·å–APKæ–‡ä»¶

APKæ–‡ä»¶ä½ç½®: `build/app/outputs/flutter-apk/app-release.apk`

#### æ­¥éª¤2: ä¼ è¾“åˆ°Androidè®¾å¤‡

- **äº‘ç›˜**: ä¸Šä¼ åˆ°iCloud/Google Drive/ç™¾åº¦äº‘ï¼Œè®¾å¤‡ç«¯ä¸‹è½½
- **é‚®ä»¶**: å‘é€ç»™è‡ªå·±ï¼Œè®¾å¤‡ç«¯æ¥æ”¶
- **USB**: ç›´æ¥æ‹·è´åˆ°è®¾å¤‡å­˜å‚¨
- **æ— çº¿**: AirDrop/é™„è¿‘å…±äº«

#### æ­¥éª¤3: å¯ç”¨æœªçŸ¥æ¥æºå®‰è£…

```text
è®¾ç½® â†’ å®‰å…¨ä¸éšç§ â†’ æ›´å¤šå®‰å…¨è®¾ç½® â†’ 
å…è®¸å®‰è£…æœªçŸ¥åº”ç”¨ â†’ Chrome/æ–‡ä»¶ç®¡ç†å™¨ â†’ å…è®¸
```

#### æ­¥éª¤4: å®‰è£…APK

1. åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰¾åˆ°APKæ–‡ä»¶
2. ç‚¹å‡»APKæ–‡ä»¶
3. é€‰æ‹©"å®‰è£…"
4. ç­‰å¾…å®‰è£…å®Œæˆ

### æ–¹æ³•2: ADBå®‰è£…

```bash
# è¿æ¥è®¾å¤‡ï¼Œå¯ç”¨USBè°ƒè¯•
adb devices

# å®‰è£…APK
adb install build/app/outputs/flutter-apk/app-release.apk
```

### æ–¹æ³•3: ç›´æ¥è¿è¡Œåˆ°è®¾å¤‡

```bash
# æ£€æŸ¥è¿æ¥çš„è®¾å¤‡
flutter devices

# è¿è¡Œåˆ°çœŸæœº
flutter run -d <è®¾å¤‡ID> --release
```

## ğŸ” ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | Debug APK | Release APK |
|------|-----------|-------------|
| **æ–‡ä»¶å¤§å°** | 104MB | 35MB |
| **æ€§èƒ½** | è¾ƒæ…¢ | ä¼˜åŒ–åæ›´å¿« |
| **è°ƒè¯•ä¿¡æ¯** | åŒ…å«å®Œæ•´ | ç§»é™¤è°ƒè¯•ä¿¡æ¯ |
| **ä»£ç æ··æ·†** | æ—  | æœ‰ |
| **ç¯å¢ƒ** | å¼€å‘ç¯å¢ƒ | ç”Ÿäº§ç¯å¢ƒ |
| **æ¨èç”¨é€”** | å¼€å‘è°ƒè¯• | **ç”Ÿäº§éƒ¨ç½²** |

## ğŸ§ª åŠŸèƒ½æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½

- [ ] åº”ç”¨å¯åŠ¨æ­£å¸¸
- [ ] ç•Œé¢æ˜¾ç¤ºæ­£ç¡®
- [ ] ç½‘ç»œè¿æ¥æµ‹è¯•

### ç”¨æˆ·è®¤è¯

- [ ] ç™»å½•åŠŸèƒ½
- [ ] JWT Tokenå­˜å‚¨
- [ ] è·¯ç”±ä¿æŠ¤

### ç›¸æœºåŠŸèƒ½

- [ ] ç›¸æœºæƒé™è¯·æ±‚
- [ ] QRç æ‰«æ
- [ ] ç…§ç‰‡æ‹æ‘„

### ä¸šåŠ¡åŠŸèƒ½

- [ ] è®¾å¤‡ä¿¡æ¯è·å–
- [ ] ç»´ä¿®è¯·æ±‚è¡¨å•
- [ ] ç…§ç‰‡ä¸Šä¼ 
- [ ] æ•°æ®æäº¤

## ğŸš¨ å¸¸è§é—®é¢˜æ’æŸ¥

### å®‰è£…é—®é¢˜

- **å®‰è£…å¤±è´¥**: æ£€æŸ¥æ˜¯å¦å¯ç”¨"æœªçŸ¥æ¥æº"å®‰è£…
- **è§£æåŒ…é”™è¯¯**: ç¡®è®¤APKæ–‡ä»¶å®Œæ•´ï¼Œé‡æ–°ä¸‹è½½
- **ç‰ˆæœ¬å†²çª**: å¸è½½æ—§ç‰ˆæœ¬åé‡æ–°å®‰è£…

### è¿è¡Œé—®é¢˜

- **æ— æ³•æ‰“å¼€**: æ£€æŸ¥Androidç‰ˆæœ¬å…¼å®¹æ€§ (æœ€ä½5.0)
- **é—ªé€€**: æ£€æŸ¥è®¾å¤‡å†…å­˜ï¼Œé‡å¯è®¾å¤‡åå°è¯•
- **ç™½å±**: ç­‰å¾…åº”ç”¨å®Œå…¨åŠ è½½ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥

### æƒé™é—®é¢˜

```text
è®¾ç½® â†’ åº”ç”¨ç®¡ç† â†’ E-Maintenance â†’ æƒé™
å¯ç”¨: ç›¸æœºã€å­˜å‚¨ã€ç½‘ç»œ
```

### ç½‘ç»œé—®é¢˜

- **è¿æ¥å¤±è´¥**: æ£€æŸ¥æœåŠ¡å™¨åœ°å€é…ç½®
- **è¶…æ—¶**: ç¡®è®¤æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
- **è¯ä¹¦é”™è¯¯**: ç”Ÿäº§ç¯å¢ƒéœ€è¦æœ‰æ•ˆSSLè¯ä¹¦

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### æ„å»ºå‰æ£€æŸ¥

- [ ] æ›´æ–°ç”Ÿäº§æœåŠ¡å™¨åœ°å€
- [ ] æ£€æŸ¥åº”ç”¨ç‰ˆæœ¬å·
- [ ] ç¡®è®¤æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

### æ„å»ºè¿‡ç¨‹

- [ ] è¿è¡Œ `flutter clean`
- [ ] è¿è¡Œ `flutter pub get`
- [ ] æ„å»ºRelease APK
- [ ] éªŒè¯APKå¤§å°åˆç†

### éƒ¨ç½²åéªŒè¯

- [ ] çœŸæœºå®‰è£…æˆåŠŸ
- [ ] åŸºç¡€åŠŸèƒ½æµ‹è¯•
- [ ] ç½‘ç»œè¿æ¥æµ‹è¯•
- [ ] å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Flutterå®˜æ–¹éƒ¨ç½²æŒ‡å—](https://flutter.dev/docs/deployment/android)
- [Androidåº”ç”¨ç­¾å](https://developer.android.com/studio/publish/app-signing)
- [é¡¹ç›®æ¶æ„æ–‡æ¡£](./architecture/)
- [APIæ¥å£æ–‡æ¡£](./api/)

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°æµç¨‹

1. **ä¿®æ”¹ä»£ç **
2. **æ›´æ–°ç‰ˆæœ¬å·** (pubspec.yaml)
3. **æ›´æ–°é…ç½®** (environment.dart)
4. **æ„å»ºæ–°APK** (`flutter build apk --release`)
5. **æµ‹è¯•éªŒè¯**
6. **åˆ†å‘éƒ¨ç½²**

---

**æœ€åæ›´æ–°**: 2025-08-17  
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0.0  
**é€‚ç”¨åº”ç”¨ç‰ˆæœ¬**: E-Maintenance v1.0.0