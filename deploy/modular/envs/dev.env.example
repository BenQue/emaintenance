# E-Maintenance 分模块部署 - 开发环境配置

# =============================================================================
# 基础设施配置 (Infrastructure)
# =============================================================================

# 数据库配置
POSTGRES_DB=emaintenance_dev
POSTGRES_USER=postgres
POSTGRES_PASSWORD=Qzy@7091!
POSTGRES_PORT=5432

# Redis配置
REDIS_PASSWORD=
REDIS_MAX_MEMORY=512mb
REDIS_PORT=6379

# Nginx配置
HTTP_PORT=80
HTTPS_PORT=443
SSL_CERT_DIR=./ssl

# MinIO对象存储（可选）
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001

# 监控配置（可选）
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_PASSWORD=admin123

# =============================================================================
# 微服务配置 (Microservices)
# =============================================================================

# JWT认证配置
JWT_SECRET=your-super-secret-jwt-key-change-in-production-dev-env
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# 会话配置
SESSION_SECRET=your-session-secret-key-for-dev

# 安全配置
BCRYPT_ROUNDS=10

# 服务端口配置
USER_SERVICE_PORT=3001
WORK_ORDER_SERVICE_PORT=3002
ASSET_SERVICE_PORT=3003

# 服务间通信
SERVICE_REGISTRY_URL=

# 邮件配置（开发环境可选）
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=

# 文件上传配置
UPLOAD_MAX_SIZE=50mb
ASSET_IMAGE_MAX_SIZE=10mb

# 功能开关
NOTIFICATION_ENABLED=true
EMAIL_ENABLED=false
WEBHOOK_ENABLED=false
WORKFLOW_ENABLED=true
AUTO_ASSIGNMENT_ENABLED=true
QR_CODE_ENABLED=true

# QR码配置
QR_CODE_BASE_URL=http://localhost

# 日志级别
LOG_LEVEL=debug

# =============================================================================
# 前端配置 (Frontend)
# =============================================================================

# 应用信息
APP_NAME=E-Maintenance (开发版)
APP_VERSION=1.0.0-dev
APP_DESCRIPTION=企业设备维修管理系统 - 开发环境

# 环境设置
NODE_ENV=development
BUILD_TARGET=development
DEBUG_MODE=true

# Web服务端口
WEB_PORT=3000
WEB_BACKUP_PORT=3001
STATIC_SERVER_PORT=8080

# API网关配置
API_GATEWAY_URL=
STATIC_URL=
CDN_URL=
UPLOAD_URL=/uploads

# 移动端配置
MOBILE_API_HOST=localhost
MOBILE_API_PORT=80
MOBILE_API_PROTOCOL=http

# 功能开关
PWA_ENABLED=true
ANALYTICS_ENABLED=false
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true

# PWA配置
PWA_CACHE_STRATEGY=networkFirst
OFFLINE_FALLBACK=true

# 多语言配置
DEFAULT_LOCALE=zh
SUPPORTED_LOCALES=zh,en

# 开发模式配置
WATCH_MODE=true

# =============================================================================
# Docker配置
# =============================================================================

# 镜像标签
IMAGE_TAG=dev-latest
BUILD_VERSION=dev

# 构建目标
BUILD_TARGET=development

# 健康检查配置
HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# 网络和安全配置
# =============================================================================

# 网络配置
NETWORK_NAME=emaintenance-network
SUBNET=172.20.0.0/16

# 安全配置
ENABLE_SECURITY_POLICIES=false
READ_ONLY_ROOT_FILESYSTEM=false

# 资源限制（开发环境相对宽松）
POSTGRES_MEMORY_LIMIT=1g
REDIS_MEMORY_LIMIT=512m
NGINX_MEMORY_LIMIT=256m
USER_SERVICE_MEMORY_LIMIT=512m
WORK_ORDER_SERVICE_MEMORY_LIMIT=768m
ASSET_SERVICE_MEMORY_LIMIT=512m
WEB_MEMORY_LIMIT=1g